<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SECTION 9 // DATA TERMINAL</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@500&display=swap" rel="stylesheet">
<style>
  /* NOWA PALETA KOLORÓW */
  :root {
    --main-bg: #000;
    --text-color: #0f0;
    --accent-1: #ff00ff;
    --accent-2: #00ffff;
    --scanline: rgba(0, 255, 0, 0.05);
  }

  /* EFEKT GLITCHA */
  @keyframes glitch {
    0% { text-shadow: 2px 0 var(--accent-1); }
    20% { text-shadow: -2px 0 var(--accent-2); }
    40%, 100% { text-shadow: none; }
  }

  /* BAZOWY STYL */
  body {
    background: var(--main-bg);
    color: var(--text-color);
    font-family: 'Courier New', monospace;
    line-height: 1.4;
    padding: 1rem;
    overflow-x: hidden;
  }

  /* EFEKT VHS */
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: 
      linear-gradient(var(--scanline) 0 0 / 100% 2px,
      repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.5),
        rgba(0, 0, 0, 0.5) 1px,
        transparent 1px,
        transparent 2px
      );
    pointer-events: none;
    z-index: 1000;
    mix-blend-mode: overlay;
  }

  /* NAGŁÓWEK */
  header h1 {
    font-size: 2.5rem;
    text-transform: uppercase;
    animation: glitch 3s infinite;
    margin-bottom: 0.5rem;
  }

  /* TERMINAL */
  .terminal {
    border: 1px solid var(--text-color);
    padding: 1rem;
    margin: 1rem 0;
    position: relative;
  }

  .terminal::before {
    content: ">";
    position: absolute;
    left: 0.5rem;
    top: 0.5rem;
  }

  /* PRZYCISKI */
  button {
    background: transparent;
    color: var(--text-color);
    border: 1px solid var(--text-color);
    padding: 0.5rem 1rem;
    font-family: inherit;
    cursor: pointer;
    transition: all 0.3s;
  }

  button:hover {
    background: var(--text-color);
    color: var(--main-bg);
    animation: glitch 0.5s infinite;
  }
</style>
</head>
<body>
  <div class="scanlines"></div>
  <div class="noise"></div>
  
  <div class="container">
    <header>
      <div class="section9-logo float"></div>
      <h1>SECTION 9</h1>
      <h2>DATA TERMINAL v3.0.1</h2>
    </header>

    <main>
      <section class="card">
        <div class="method">
          <h2>SYSTEM ACCESS</h2>
          <div class="input-group">
            <input type="text" id="repoPath" placeholder="ENTER_QUERY_PATH::" class="cyber-input">
            <button id="apiBtn" class="cyber-btn">
              EXECUTE_QUERY
            </button>
          </div>
          <div id="apiResult" class="cyber-terminal">
            <div class="terminal-header">
              <span class="terminal-btn red"></span>
              <span class="terminal-btn yellow"></span>
              <span class="terminal-btn green"></span>
              <span class="terminal-title">OUTPUT_STREAM</span>
            </div>
            <div class="terminal-content" id="terminalOutput">
              > SYSTEM STATUS: ONLINE<br>
              > SECURITY LEVEL: 9<br>
              > WELCOME, MAJOR KUSANAGI<br>
              > READY FOR QUERY...
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <h2>AUDIO INTERFACE</h2>
        <div class="music-controls">
          <button id="playMusicBtn" class="cyber-btn">
            ACTIVATE_AUDIO_STREAM
          </button>
          
          <div class="volume-control">
            <label for="volumeControl">VOLUME_LEVEL:: </label>
            <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="0.5" class="cyber-slider">
          </div>
        </div>
      </section>

      <!-- NEW CONTACT SECTION -->
      <section class="contact-section">
        <h2>CONTACT INTERFACE</h2>
        <p>SECURE COMMUNICATION CHANNEL ESTABLISHED</p>
        <a href="mailto:dawidmurias907@gmail.com" class="contact-email">dawidmurias907@gmail.com</a>
      </section>
    </main>

    <footer>
      <p>SECTION_9_INTERNAL_USE_ONLY :: ©_2025_PUBLIC_SECURITY_SECTION_9</p>
    </footer>
  </div>

  <audio id="bgMusic" src="https://www.myinstants.com/media/sounds/ghost-in-the-shell-innocence-cyberbrain-conversation.mp3" loop></audio>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // API Query functionality
      const apiBtn = document.getElementById('apiBtn');
      const terminalOutput = document.getElementById('terminalOutput');
      const repoPath = document.getElementById('repoPath');
      
      // Audio functionality
 const playMusicBtn = document.getElementById('playMusicBtn');
      const bgMusic = document.getElementById('bgMusic');
      const volumeControl = document.getElementById('volumeControl');
      let isPlaying = false;
      bgMusic.load();
  function handleFirstPlay() {
        if (bgMusic.readyState > 0) {
          togglePlay();
        } else {
          bgMusic.load();
          bgMusic.oncanplay = function() {
            togglePlay();
            bgMusic.oncanplay = null;
          };
        }
      }
        function togglePlay() {
        if (isPlaying) {
          bgMusic.pause();
          playMusicBtn.textContent = 'ACTIVATE_AUDIO_STREAM';
        } else {
          bgMusic.play()
            .then(() => {
              playMusicBtn.textContent = 'TERMINATE_AUDIO_STREAM';
            })
            .catch(error => {
              console.error("Audio playback error:", error);
              terminalOutput.innerHTML += '<br>> AUDIO_ERROR: USER_INTERACTION_REQUIRED';
              terminalOutput.scrollTop = terminalOutput.scrollHeight;
              playMusicBtn.textContent = 'CLICK_TO_ENABLE_AUDIO';
            });
        }
        isPlaying = !isPlaying;
      }

      playMusicBtn.addEventListener('click', function() {
        // Wymagana interakcja użytkownika przed odtworzeniem
        if (bgMusic.readyState === 0) {
          terminalOutput.innerHTML += '<br>> AUDIO_INIT: USER_INTERACTION_REQUIRED';
          terminalOutput.scrollTop = terminalOutput.scrollHeight;
        }
        handleFirstPlay();
      });

      volumeControl.addEventListener('input', function() {
        bgMusic.volume = this.value;
      });
      // Escape HTML to prevent XSS
      function escapeHtml(unsafe) {
        return unsafe
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#039;");
      }

      // Loading effect
      function setLoading(isLoading) {
        apiBtn.disabled = isLoading;
        if (isLoading) {
          apiBtn.innerHTML = '<span class="spinner">⌛</span> EXECUTING_QUERY...';
          terminalOutput.innerHTML += '<br>> SCANNING_REPOSITORY...';
        } else {
          apiBtn.innerHTML = 'EXECUTE_QUERY';
        }
      }
      
      // Create project button
      function createProjectButton(folderName) {
        const button = document.createElement('button');
        button.className = 'cyber-project-btn';
        
        const indexUrl = `https://darin0v0.github.io/projects/${folderName}/index.html`;
        
        button.innerHTML = `
          <span class="cyber-project-icon">⎔</span>
          <span class="cyber-project-name">${escapeHtml(folderName)}</span>
        `;
        
        button.onclick = function() {
          terminalOutput.innerHTML += `<br>> OPENING_PROJECT: ${escapeHtml(folderName)}...`;
          terminalOutput.scrollTop = terminalOutput.scrollHeight;
          window.open(indexUrl, '_blank');
        };
        
        button.addEventListener('mouseenter', () => {
          terminalOutput.innerHTML += `<br>> HIGHLIGHTED: ${escapeHtml(folderName)}`;
          terminalOutput.scrollTop = terminalOutput.scrollHeight;
        });
        
        return button;
      }
      
      // Handle API query
      apiBtn.addEventListener('click', async function() {
        const path = repoPath.value.trim() || 'projects';
        setLoading(true);
        
        try {
          terminalOutput.innerHTML += '<br>> INITIATING_GITHUB_API_REQUEST...';
          terminalOutput.scrollTop = terminalOutput.scrollHeight;
          
          const response = await fetch(`https://api.github.com/repos/Darin0v0/Darin0v0.github.io/contents/${path}`);
          
          if (!response.ok) {
            const errorData = await response.json().catch(() => null);
            let errorMessage = `ERROR_ACCESSING_PATH: ${escapeHtml(path)}`;
            
            if (errorData?.message) {
              errorMessage += `<br>> GITHUB_API: ${escapeHtml(errorData.message)}`;
            }
            
            throw new Error(errorMessage);
          }
          
          const contents = await response.json();
          const folders = contents.filter(item => item.type === 'dir');
          
          terminalOutput.innerHTML += '<br>> SCAN_COMPLETE. ANALYZING_RESULTS...';
          terminalOutput.scrollTop = terminalOutput.scrollHeight;
          
          // Create projects container
          let projectsContainer = document.querySelector('.cyber-projects-container');
          if (!projectsContainer) {
            projectsContainer = document.createElement('div');
            projectsContainer.className = 'cyber-projects-container';
            document.querySelector('main').insertBefore(projectsContainer, document.querySelector('.contact-section'));
          }
          
          // Create projects grid
          const projectsGrid = document.createElement('div');
          projectsGrid.className = 'cyber-projects-grid';
          
          if (folders.length === 0) {
            terminalOutput.innerHTML += `<br><br>> NO_PROJECTS_FOUND_IN: ${escapeHtml(path)}`;
            projectsGrid.innerHTML = '<div class="cyber-project-btn" style="grid-column:1/-1">NO PROJECTS FOUND</div>';
          } else {
            terminalOutput.innerHTML += `<br><br>> PROJECTS_DETECTED: ${folders.length}`;
            
            folders.forEach(folder => {
              projectsGrid.appendChild(createProjectButton(folder.name));
              terminalOutput.innerHTML += `<br>> LOADED: ${escapeHtml(folder.name)}`;
            });
          }
          
          // Update container
          projectsContainer.innerHTML = '';
          projectsContainer.appendChild(projectsGrid);
          
          terminalOutput.innerHTML += '<br><br>> READY_FOR_NEXT_QUERY';
          terminalOutput.scrollTop = terminalOutput.scrollHeight;
          
        } catch (error) {
          terminalOutput.innerHTML += `
            <br><br>> SYSTEM_ERROR:
            <br>> ${escapeHtml(error.message).replace('\n', '<br>> ')}
            <br><br>> WARNING: UNAUTHENTICATED_REQUESTS_LIMITED
          `;
          console.error('GitHub API error:', error);
          terminalOutput.scrollTop = terminalOutput.scrollHeight;
        } finally {
          setLoading(false);
        }
      });
      
      // Handle Enter key
      repoPath.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          apiBtn.click();
        }
      });
      
      // Audio controls
      playMusicBtn.addEventListener('click', function() {
        if (isPlaying) {
          bgMusic.pause();
          playMusicBtn.textContent = 'ACTIVATE_AUDIO_STREAM';
        } else {
          bgMusic.play();
          playMusicBtn.textContent = 'TERMINATE_AUDIO_STREAM';
        }
        isPlaying = !isPlaying;
      });

      volumeControl.addEventListener('input', function() {
        bgMusic.volume = this.value;
      });

      // Add some initial terminal effects
      setTimeout(() => {
        terminalOutput.innerHTML += '<br>> SYSTEM_SCAN_COMPLETE';
        terminalOutput.scrollTop = terminalOutput.scrollHeight;
      }, 1500);

      setTimeout(() => {
        terminalOutput.innerHTML += '<br>> ALL_SYSTEMS_NOMINAL';
        terminalOutput.scrollTop = terminalOutput.scrollHeight;
      }, 3000);
    });
  </script>
</body>
</html>
